<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8">
</head>
<body>
<!--<div id="list">-->
    <!--<p id="java">Java</p>-->
    <!--<p id="python">Python</p>-->
    <!--<p id="scheme">Scheme</p>-->
<!--</div>-->
<!--<form id = "test-form" method="post" onsubmit="return checkForm()">-->
    <!--<input type="text" id="username" name="test">-->
    <!--<input type="password" id="password" name="password">-->
    <!--<button type="submit">Submit</button>-->
<!--</form>-->
<!--<form id="login-form" method="post" onsubmit="return checkForm()">-->
    <!--<input type="text" id="username" name="username">-->
    <!--<input type="password" id="input-password">-->
    <!--<input type="hidden" id="md5-password" name="password">-->
    <!--<button type="submit">Submit</button>-->
<!--</form>-->
<!--<input type="date" value="2016-12-08">-->
<!--<input type="datetime-local" value="2015-07-01T02:03:04">-->
<!--<input type="color" value="#ff0000">-->

<!--<script>-->
    <!--function checkForm() {-->
        <!--var input_pwd = document.getElementById('input-password');-->
        <!--var md5_pwd = document.getElementById('md5-password');-->
        <!--// 把用户输入的明文变为MD5:-->
        <!--//md5_pwd.value = toMD5(input_pwd.value);-->
        <!--// 继续下一步:-->
        <!--return true;-->
    <!--}-->
<!--</script>-->

<!--<script>-->
    <!--var js = document.createElement('p');-->
    <!--var list = document.getElementById('list');-->
    <!--js.id = 'javascript';-->
    <!--js.innerText = 'JavaScript';-->
    <!--list.appendChild(js);-->

    <!--var d = document.createElement('style');-->
    <!--d.setAttribute('type','text/css');-->
    <!--d.innerHTML = 'p{color:red}';-->
    <!--document.getElementsByTagName('head')[0].appendChild(d);-->

    <!--var-->
        <!--list = document.getElementById('list'),-->
        <!--ref = document.getElementById('python'),-->
        <!--haskell = document.createElement('p');-->
    <!--haskell.id = 'haskell';-->
    <!--haskell.innerText = 'Haskell';-->
    <!--list.insertBefore(haskell, ref);-->
    <!--var parent = document.getElementById('list');-->
    <!--parent.removeChild(parent.children[0]);-->
    <!--parent.removeChild(parent.children[1]);-->
    <!--parent.removeChild(parent.children[0]);-->
    <!--function checkForm() {-->
        <!--var pwd = document.getElementById('password');-->
        <!--pwd.value = toMD5(pwd.value);-->
        <!--return true;-->
    <!--}-->
<!--</script>-->
<div id="test-promise-log" style="border: solid 1px #ccc; padding: 1em; margin: 15px 0;">
    <p id="p">Log:</p>
</div>

<script>
    'use strict';

    //清除logo：
    var logging = document.getElementById('test-promise-log');
    while(logging.children.length > 1){
        logging.removeChild(logging.children[logging.children.length - 1]);
    }

    //输出到log页面：
    function log(s) {
        var p = document.getElementById('p');
        p.innerHTML = s ;
        logging.appendChild(p);
    }

    new Promise(function (resolve,reject) {
        log('start new Promise...');
        var timeOut = Math.random()*2;
        log('set timeout to:' + timeOut + 'seconds.');
        setTimeout(function () {
            if(timeOut < 1){
                log('call reject()...');
                resolve('200 OK');
            }
            else{
                log('call reject()...');
                reject('timeout in' + timeOut + 'seconds.');
            }
        },timeOut*1000);
    }).then(function (r) {
        log('Done:' + r);
    }).catch(function (reason) {
        log('Failed:' + reason);
    });
</script>


</body>
</html>